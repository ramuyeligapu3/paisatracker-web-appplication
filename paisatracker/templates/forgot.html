{% extends "layout.html" %}
{% block title %}
   Log In
{% endblock %}
{% block main %}
<body>
  
    <div class="alert alert-success" role="alert">
      Check this: only if your email is present in my company records will you receive an email.
    </div>
    <div class="form-container">

      <form action="/forgot" method="post" id="resetPasswordForm" class="row g-3 needs-validation custom-form-width p-3 m-0 border-0 bd-example" novalidate>
        <div class="col-12">
          <div class="form-floating">
            <input type="text" class="form-control" name="otp" id="validationCustomUsername" placeholder="OTP" required>
            <label for="validationCustomUsername">OTP</label>
            <div class="invalid-feedback">
              Please enter a valid OTP.
            </div>
          </div>
        </div>
        <div class="col-12">
          <div class="form-floating">
            <input type="password" class="form-control" name="password"id="validationCustomPassword" placeholder="Password" required>
            <label for="validationCustomPassword">Password</label>
            <div class="invalid-feedback">
              Please enter a new password.
            </div>
          </div>
        </div>
        <div class="col-12">
          <div class="form-floating">
            <input type="password" class="form-control" name="confirmpassword" id="validationCustomConfirmPassword" placeholder="Confirm Password" required>
            <label for="validationCustomConfirmPassword">Confirm Password</label>
            <div class="invalid-feedback" id="confirmPasswordFeedback">
              Please confirm your password.
            </div>
          </div>
        </div>
        <div class="col-12">
          <button class="btn btn-primary" type="submit">Reset Password</button>
        </div>
      </form>
    </div>

    <script>
      (function () {
        'use strict';

          var form = document.getElementById('resetPasswordForm');

          form.addEventListener('submit', function (event) {
          var password = document.getElementById('validationCustomPassword').value;
          var confirmPassword = document.getElementById('validationCustomConfirmPassword').value;
          var feedback = document.getElementById('confirmPasswordFeedback');

          // Reset custom validity messages
          document.getElementById('validationCustomConfirmPassword').setCustomValidity('');

          if (password !== confirmPassword) {
            feedback.textContent = 'Passwords do not match.';
            feedback.classList.add('text-danger');
            document.getElementById('validationCustomConfirmPassword').setCustomValidity('Passwords do not match.');
            form.classList.add('was-validated');
            event.preventDefault();
          } else {
            feedback.textContent = ''; // Clear feedback message if passwords match
            feedback.classList.remove('text-danger'); // Ensure no error class is applied
            form.classList.remove('was-validated');
          }
        }, false);
      })();
    </script>

    </body>
{% endblock %}
